변화 속도를 따라가려면 모든 수단을 동원하여 가능한 한 느슨하고 유연한 코드를 작성해야 한다.

코드는 금세 낡고 수정하기 어려워지고, 결국 기억 저편으로 사라질 것이다.

유연함을 유지하는 한 가지 좋은 방법은 물론 가능한 한 코드를 적게 작성하는 것이다.

세부 사항을 완전히 코드 밖으로 옮기는 방법에 대해 설명한다. 그렇게 하면 세부 사항을 안전하고도 쉽게 변경할 수 있다.

# Topic 28 결합도 줄이기

높은 겷합도는 변경의 적이다.

소프트웨어의 구조는 유연해야 한다.

유연하려면 각각의 부품이 다른 부품에 가능한 한 조금만 연결되어야 한다.

`Tip 44` 결합도가 낮은 코드가 바꾸기 쉽다.

## 열차 사고

기차의 모든 객차가 서로 연결되어 있듯이 메서드나 속성들이 모두 연결되어 있는 코드를 `열차 사고`라고 부른다.

`Tip 45` 묻지 말고 말하라

이 원칙은 다른 객체의 내부 상태에 따라 판단을 내리고 그 객체를 갱신해서는 안 되는 것이다.

## 데메테르 법칙

`Tip 46` 메서드 호출을 엮지 말라.

무언가에 접근할 때 `.` 을 딱 하나만 쓰려고 노력해 보라. `무언가에 접근` 한다는 건 중간 변수를 사용하는 경우까지 포함해야 한다.

## 글로벌화의 해악

전역 데이터는 여러 가지 방법으로 코드의 결합도를 높인다.

코드를 재사용할 수 있게 하려면 깨끗한 인터페이스를 만들고 나머지 코드와의 결합을 없애야 한다.

`Tip 47` 전역 데이터를 피하라.

## 싱글턴도 전역 데이터다

여러분의 코드에 있는 것이 실글턴뿐이더라도, 외부로 노출된 인스턴스 변수가 잔뜩 있는 싱글턴은 여전히 전역 데이터이다.

## 외부 리소스도 전역 데이터다

수정 가능한 외부 리소스는 모두 전역 데이터다.

`Tip 48` 전역적이어야 할 만큼 중요하다면 API로 감싸라.

## 상속은 결합을 늘린다.

## 결합은 모두 ETC

직접적으로 아는 것만 다루는 부끄럼쟁이 코드를 계속 유지하라. 그러면 애플리케이션의 결합도를 낮게 유지할 수 있을 것이고, 결과적으로 코드를 바꾸기 쉬워질 것이다.

# Topic 29 실세계를 갖고 저글링하기

## 이벤트

이벤트는 무언가 정보가 있다는 것을 의미한다. 정보는 사용자가 버튼을 클릭하거나, 추가 정보가 갱신될 때 처럼 외부에서 올 수 있다.

## 유한 상태 기계

### 실용주의 FSM 해부학

기본적 상태 기계는 이벤트를 어떻게 처리할 지 정의한 명세일 뿐이다.

### 행동 추가하기

### 상태 기계는 시작일 뿐

## 감시자 패턴

`감시자 패턴`은 이벤트를 발생시키는 쪽인 감시 대상과 이런 이벤트에 관심이 있는 클라이언트인 감시자로 이루어진다.

감시자 패턴에는 문제가 하나있다. 모든 감시자가 감시 대상에 등록을 해야 하기 때문에 결합이 생긴다. 일반적으로 감시 대상이 콜백을 직접 호출하도록 구현하기 때문에 이 부분이 성능 병목이 될 수 있다.

동기적 처리의 특성상 콜백 실행이 끝날 때까지 감시 대상이 계속 기다려야 하기 때문이다.

## 게시 구독

현재 어떤 일이 벌어지고 있는지 파악하기가 힘들다는 것이다.

## 반응형 프로그래밍과 스트림 그리고 이벤트

이벤트를 이리저리 연결하는 것도 쉽지만은 않다. 그래서 스트림이 필요하다.

### 이벤트 스트림은 비동기 컬랙션

## 어디에나 이벤트가 있다.

이벤트가 어디서 발생하든 이벤트를 중심으로 공들여 만든 코드는 일직선으로 수행되는 코드보다 더 잘 반응하고 결합도가 더 낫다.

# Topic 30 변환 프로그래밍

`Tip 49` 프로그래밍은 코드에 관한 것이지만, 프로그램은 데이터에 관한 것이다.

## 변환 찾기

요구 사항에서 시작하는 게 변환을 찾는 가장 쉬운 방법이다.

## 이것이 왜 그리 대단한가?

`Tip 50` 상태를 쌓아 놓지 말고 전달하라.

데이터를 전체 시스템 여기저기의 작은 웅덩이에 흩어 놓는 대신, 데이터를 거대한 강으로 흐름으로 생각하라.

## 오류 처리는 어떻게 하나?

변환 사이에 값을 절대 날것으로 넘기지 않는 것이다. 대신 래퍼 역할을 하는 자료 구조나 타입으로 값을 싸서 넘긴다.

### 표현 방식 정하기

### 파이프라인에서 오류 처리하기

우리는 함수 호출을 나중에 호출할 수 있는 값 형태로 바꾸어야 한다.

## 변환은 프로그래밍을 변환한다.

코드를 일련의변환으로 생각하는 접근 방식은 프로그래밍을 해방시킨다.

# Topic 31 상속세

## 약간의 배경지식

## 코드를 공유하기 위해 상속을 쓸 때의 문제

상속도 일종의 결합이다.

## 타입을 정의하기 위해 상속을 쓸 때의 문제

어차피 여러분의 도메인을 정확하게 모델링 할 수는 없다.

`Tip 51` 상속세를 내지 말라.

## 더 나은 대안

- 인터페이스와 프로토콜
- 위임
- 믹스인과 트레이트

### 인터페이스와 프로토콜

`Tip 52` 다형성은 인터페이스로 표현하는 것이 좋다.

인터페이스와 프로토콜은 상송 없이도 다형성을 가져다준다.

### 위임

`Tip 53` 서비스에 위임하라. Has-A가 Is-A보다 낫다.

### 믹스인, 트레이트, 카테고리, 프로토콜 확장 등

중요한 것은 이 기능을 구현했을 때 할 수 있는 일, 바로 기존의 것과 새로운 것의 기능 집합을 합치는것이다.

`Tip 54` 믹스인으로 기능을 공유하라.

## 상속이 답인 경우는 드물다.

프로그래밍의 다른 모든 것과 마찬가지로 여러분의 목표는 의도를 가장 잘 드러내는 기법을 사용하는 것이어야 한다.

# Topic 32 설정

애플리케이션 외부에서 관리하라.

코드가 자신이 실행되는 환경에 적응하는 것이다.

`Tip 55` 외부 설정으로 애플리케이션을 조정할 수 있게 하라.

## 정적 설정

2021년 기준으로는 YAML과 JSON이 가장 많이 쓰인다.

설정 정보를 API 뒤로 숨겨라. 그러면 설정을 표현하는 세부 사항으로 부터 여러분의 코드를 떼어 놓을 수 있다.

## 서비스형 설정

서비스 API 뒤에서 관리하는 것을 선호한다.

## 도도 코드를 작성하지미 말라.

여러분의 프로젝트가, 여러분의 경력이 도도의 전처를 밟지 않도록 하라.

[5장 구부러지거나 부러지거나](https://www.notion.so/5-1862dbf601a780c4af18db20f624ffdb?pvs=21)
