## 1.1 자, 시작해보자!

다양한 연극을 외주로 받아서 공연하는 극단.

1. 공연 요청이 들어오면 연극의 장르와 관객 규모를 기초로 비용을 책정
2. 비극과 희극만 공연
3. 공연료와 별개로 포인트 지급
4. 다음 의뢰 시 공연료 할인

## 1.2 예시 프로그램을 본 소감

설계가 나쁜 시스템은 수정하기 어렵다.

무엇을 수정할지 찾기 어렵다면 실수를 저질러서 버그가 생길 가능성도 커진다가능성도 높아진다.

프로그램이 새로운 기능을 추가하기에 편한 구조가 아니라면, 먼저 기능을 추가하기 쉬운 형태로 리 팩터링을형태로 리팩터링을 하고 원하는 기능을 추가한다.

리팩토링이리팩터링이 필요한 이유는 변경 때문이다.

## 1.3 리 팩터링의1.3 리팩터링의 첫 단계

리팩토링하기리팩터링하기 전에 제대로 된 테스트로부터 마련한다.

테스트는 반드시 자가 진단하도록 만든다.

## 1.4 statement() 함수 쪼개기

[함수 추출하기](https://www.notion.so/Chapter-06-df2fdebb63b448a9a32df0c0dfe392fe)

리팩토링은리팩터링은 프로그램 수정을 작은 단계로 나눠 진행한다.

중간에 실수하더라도 버그를 쉽게 찾을 수 있다.

### play 변수 제거하기

[임시 변수를 질의 함수로 바꾸기](https://www.notion.so/Chapter-07-d1597b2d3f574af8a62ff35cc0db720d)

[변수 인라인 하기](https://www.notion.so/Chapter-06-df2fdebb63b448a9a32df0c0dfe392fe)

[함수 선언 바꾸기](https://www.notion.so/Chapter-06-df2fdebb63b448a9a32df0c0dfe392fe)

설사 심각하게 느려지더라도 제대로 리 팩터링 된제대로 리팩터링된 코드 베이스는코드베이스는 그렇지 않은 코드보다 성능을 개선하기가 훨씬 수월하다.

### 적립 포인트 계산 코드 추출하기

### format 변수 제거

임시 변수는 나중에 문제를 일으킬 수 있다.

- 루틴이 길다.
- 복잡해지기 쉽다.

[함수 선언 바꾸기](https://www.notion.so/Chapter-06-df2fdebb63b448a9a32df0c0dfe392fe)

### volumetricvolumCredits 변수 제거하기

[반복문 쪼개기](https://www.notion.so/Chapter-08-1c32642774a04609a7986673e365edda)

[문장 슬라이드 하기](https://www.notion.so/Chapter-08-1c32642774a04609a7986673e365edda)

[임시 변수를 질의 함수로 바꾸기](https://www.notion.so/Chapter-07-d1597b2d3f574af8a62ff35cc0db720d)

[함수 추출하기](https://www.notion.so/Chapter-06-df2fdebb63b448a9a32df0c0dfe392fe)

리팩토링이리팩터링이 성능에 상당한 영향을 주기도 한다. 잘 다듬어진 코드라야 성능 개선 작업도 훨씬 수월하기 때문이다. 리팩터링 때문에 성능이 떨어진다면, 마무리하고 성능을 개선한다.

## 1.5 중간 점점: 난무하는 중첩 함수

## 1.6 계산 단계와 포매팅포맷팅 단계 분리하기

[단계 쪼개기](https://www.notion.so/Chapter-06-df2fdebb63b448a9a32df0c0dfe392fe)

[함수 추출하기](https://www.notion.so/Chapter-06-df2fdebb63b448a9a32df0c0dfe392fe)

함수 옮기기

[반복문을 파이프라인으로 바꾸기](https://www.notion.so/Chapter-08-1c32642774a04609a7986673e365edda)

## 1.7 중간 점검: 두 파일(과 두 단계)로 분리됨

간결함이 지혜의 정수일지 몰라도, 프로그래밍에서만큼은 명료함이 진화할 수 있는 소프트웨어의 정수다.

**캠핑 자들에게는 “도착했을 때보다 깔끔하게 정돈하고 떠난다”는 규칙이 있다. 프로그래밍도 마찬가지다 항시 코드 베이스를코드베이스를 작업 시작 전보다 건강하게(healthy) 만들어놓고 떠나야 한다.**

## 1.8 다형성을 활용해 계산 코드 재구성하기

조건부 로직을 다형성으로 바꾸기

### 공연료 계산기 만들기

전용 클래스 만들기

생성자에 함수 선언 바꾸기 적용

### 함수들을 계산기로 옮기기

함수 옮기기

함수 인라인

### 공연료 계산기를 다형성 버전으로 만들기

타입 코드를 서브 클래스로 바꾸기

생성자를 팩토리 함수로 바꾸기

조건부 로직을 다형성으로 바꾸기

## 1.9 상태 점검: 다형성을 활용하여 데이터 생성하기

## 1.10 마치며

함수 추출하기

변수 인라인하기

함수 옮기기

조건부 로직을 다형성으로 바꾸기

단계 쪼개기

좋은 코드를 가늠하는 확실한 방법은 `얼마나 수정하기 쉬운가`다.

취향을 넘어서는 관점이 분명 존재하며, 코드를 `수정하기 쉬운 정도`야말로 좋은 코드를 가늠하는 확실한 방법이라고 믿는다. 코드는 명확해야 한다. 코드를 수정해야 할 상황이 되면 고쳐야 할 곳을 쉽게 찾을 수 있고 오류 없이 빠르게 수정할 수 있어야 한다.

리팩터링을 효과적으로 하는 핵심은, 단계를 잘게 나눠야 더 빠르게 처리할 수 있고, 코드는 절대 깨지지 않으며 이러한 작은 단계들이 모여서 상당히 큰 변화를 이룰 수 있다는 것이다.