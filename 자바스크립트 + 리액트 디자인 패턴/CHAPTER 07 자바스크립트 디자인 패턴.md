<aside>
💡

패턴을 선택할 때 패턴이 실질적인 구현에 도움이 되는지 고려해야 한다. 즉, 디자인 패턴에 대해 정확히 알고 사용할 때를 잘 파악하게 된다면 애플리케이션 아키텍처에 올바른 디자인 패턴을 적용하기 수월해진다는 뜻이다.

</aside>

# 7.1 생성 패턴

생성 패턴은 객체를 생성하는 방법을 다룬다.

- 생성자 패턴
- 모듈 패턴
- 노출 모듈 패턴
- 싱글톤 패턴
- 프로토타입 패턴
- 팩토리 패턴

# 7.2 생성자 패턴

`NOTE` 객체 생성자는 특정 유형의 객체를 생성할 때 사용되었다. 객체가 처음 생성되었을 때 인수로 받아온 값을 객체 멤버의 변수와 메서드에 할당하는 동시에 사용할 준비를 마친다.

<figure>
    <img src="./images/스크린샷 2025-06-08 오후 3.23.49.png" alt="생성자 패턴" width="600" />
    <figcaption>그림 7-1. 생성자 패턴</figcaption>
</figure>

생성자 패턴

## 7.2.1 객체 생성

자바스크립트에서 새로운 객체를 만들 때 사용하는 세 가지 일반적인 방법

1. 리터럴 표기법을 사용하여 빈 객체 생성

   ```tsx
   const newObject = {};
   ```

2. Object.create() 메서드를 사용하여 빈 객체를 생성

   ```tsx
   const newObject = Object.create(Object.prototype);
   ```

3. new 키워드를 사용하여 빈 객체를 생성

   ```tsx
   const newObject = new Object();
   ```

객체에 키와 값을 할당하는 방법은 아래와 같다.

1. 도트 dot(.) 문법

   ```tsx
   newObject.someKey = "hellow";
   ```

2. 대괄호 문법

   ```tsx
   newObject["someKey"] = "hellow";
   ```

3. Object.defindProperty

   ```tsx
   Object.defineProperty(newObject, 'someKey', {
   	value: 'hellow',
   	writable: true
   	enumerable: true
   	configurable: true
   });
   ```

## 7.2.2 생성자의 기본 특징

ES2015에 도입된 자바스크립트의 클래스는 객체 템플릿의 정의하고 캡슐화 및 상속을 구현할 수 있게 했다.

## 7.2.3 프로토타입을 가진 생성자

생성자를 통해 객체를 생성하면 생성자의 프로토타입 객체에 속한 속성을 새 객체에서도 활용할 수 있다.

# 7.3 모듈 패턴

모듈은 애플리케이션 아키텍처의 핵심 구성 요소이며 프로젝트를 구성하는 코드 단위를 체계적으로 분리 및 관리하는 데 효과적으로 활용된다.

## 7.3.1 객체 리터럴

객체 리터럴 표기법은 객체는 중괄호 안에서 키와 값을 쉼표로 구분하여 객체를 정의하는 방법이다.

## 7.3.2 모듈 패턴

개발자들은 자바스크립트 모듈을 사용하여 객체, 함수, 클래스, 변수 등을 구성하여 다른 파일에 쉽게 내보내거나 가져올 수 있다.

<figure>
    <img src="./images/스크린샷 2025-06-08 오후 3.34.57.png" alt="모듈 패턴" width="600" />
    <figcaption>그림 7-2. 모듈 패턴</figcaption>
</figure>

모듈 패턴

### 비공개

모듈 패턴은 클로저를 활용해 `비공개` 상태와 구성을 캡슐화한다.

모듈 패턴을 사용한다면 공개 API만을 노출하고 나머지는 클로저 내부에 비공개로 유지할 수 있다.

모듈 패턴은 즉시 실행 함수를 사용해 객체를 반환한다.

ES2019(ES10) 이전의 자바스크립트에서는 접근 제한자(#, 해시)를 지원하지 않아 엄밀히 말해 `비공개`라는 개념이 존재하지 않았다.

### 역사

역사적인 관점에서 보자면 모듈 패턴은 리처드 콘포드를 비롯한 여러 사람들에 의해 발명되었다.

### 예제

모듈의 클로저 내부로 스코프가 제한되어 오직 공개된 api만 접근할 수 있다.

- 비공개 자유성: 모듈 내부에서만 사용 가능한 비공개 함수를 자유롭게 만들 수 있다. 다른 파일에서 접근할 수 없기에 완전한 비공개를 실현할 수 있다.
- 디버깅 용이성: 대개 함수는 선언되고 이름이 정해지므로, 어떤 함수가 예외를 발생시켰는지 알아내려고 할 때 디버거에서 콜 스택을 찾기 쉬워진다.

## 7.3.3 모듈 패턴의 변형

### 믹스인 가져오기 변형

이 변형된 패턴은 유틸 함수나 외부 라이브러리 같은 전역 스코프에 있는 요소를 모듈 내부의 고차 함수에 인자로 전달 할 수 있게 한다.

### 내보내기 변형

## 장점

자바스크립트의 관점에서 볼 때 모듈 패턴은 캡슐화 개념보다 객체 지향 프로그래밍 지식을 가진 초보 개발자가 이해하기 쉽다.

모듈 사이의 의존성을 관리하고 전역 요소를 원하는 만큼 넘겨주어 코드의 유지보수를 용이하게 하고 독립적으로 만들어준다.

모듈 패턴은 공개되면 안 되는 코드를 캡슐화할 수 있다. 덕분에 여러 의존성을 동시에 사용할 수 있고 이름의 충돌도 피할 수 있다.

### 단점

모듈 패턴의 단점은 공개와 비공개 맴버를 서로 다르게 접근해야 한다는 점이다. 공개 여부를 바꾸고 싶다면 값이 위치한 파일로 가서 각각 바꾸어주어야만 한다. → 이게 단점이 될 수 있나?

자동화 단위 테스트에서 비공개 맴버는 제외된다는 것과 핫 픽스가 필요한 오류를 고칠 때 복잡도를 높인다는 점이다.

## 7.3.4 WeakMap을 사용하는 최신 모듈 패턴

ES6에서 도입된 WeakMap 객체는 약한 참조를 가진 키-값의 쌍으로 이루어진 집합체이다. 참조되지 않는 키는 가비지 컬렉션의 대상이 된다.

## 7.3.5 최신 라이브러리와 모듈

자바스크립트 라이브러리를 만들 때 모듈 패턴을 사용할 수 있다.

# 7.4 노출 모듈 패턴

모든 함수와 변수를 비공개 스코프에 정의하고, 공개하고 싶은 부분만 포인터를 통해 비공개 요소에 접근할 수 있게 해주는 익명 객체를 반환하는 패턴이다.

## 7.4.1 장점

노출 모듈 패턴을 사용하면 코드의 일관성이 유지된다. 또한 모듈의 가장 아래 위치한 공개 객체를 더 알아보기 쉽게 바꾸어 가독성을 향상시킨다.

## 7.4.2 단점

노출 모듈 패턴의 단점은 비공개 함수를 참조하는 공개 함수를 수정할 수 없다는 것이다.

# 7.5 싱글톤 패턴

싱클톤 패턴은 클래스의 인스턴스가 오직 하나만 존재하도록 제한하는 패턴이다.

이 패턴은 전역에서 접근 및 공유해야 하는 단 하나의 객체가 필요할 때 유용하다.

싱글톤 패턴을 구현하려면 이미 존재는 인스턴스가 없어야 한다. 인스턴스가 이미 존재할 경우에는 해당 인스턴스의 참조를 반환한다.

싱글톤의 특징은 인스턴스에 대한 전역 접근을 허용한다는 것이다.

### 싱글톤 패턴의 적합성

- 클래스의 인스턴스는 정확히 하나만 있어야 하며 눈에 잘 보이는 곳에 위치시켜 접근을 용이하게 해야 한다.
- 싱글톤의 인스턴스는 서브클래싱을 통해서만 확장할 수 있어야 하고, 코드의 수정 없이 확장된 인스턴스를 사용할 수 있어야 한다.

싱글톤은 유용하지만 자바스크립트에서 싱글톤이 필요하다는 것은 설계를 다시 생각해 봐야 한다는 신호일 수 있다.

자바스크립트에서 싱글톤 클래스를 사용하는 것은 다음과 같은 단점이 있다.

- 싱글톤임을 파악하는 것이 힘들다
- 테스트하기 힘들다
- 신중한 조정이 필요하다.

## 7.5.1 리액트의 상태 관리

싱클톤 대신 Context API나 리덕스 같은 전역 상태 관리 도구를 이용하여 개발할 수 있다.
