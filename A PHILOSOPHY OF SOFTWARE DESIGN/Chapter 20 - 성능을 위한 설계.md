# 20. 성능을 위한 설계

가장 중요한 아이디어는 여전히 단순성이다. 단순성은 시스템 설계를 향상시킬 뿐만 아니라 일반적으로 시스템을 더 빠르게 만든다.

## 20.1 성능에 대해 생각하는 방법

가장 좋은 접근 방식은 성능에 대한 기본 지식을 사용하여 자연스럽게 효율적이면서도 깔끔하고 단순한 설계 대안을 선택하는 이러한 극단 사이에 있는 것이다. 

작업의 비용을 개발적으로 측정하는 작은 프로그램을 실행하는 것이다. 

일반적으로 간단한 코드는 복잡한 코드보다 빠르게 실행되는 경향이 있다. 

## 20.2 수정 전 측정

변경하기 전에 시스템의 기존 동작을 측정해라.

1. 측정을 통해 성능 조정이 가장 큰 영향을 미치는 위치를 식별한다.
2. 기준을 제공하여 변경 후 성능을 다시 측정하여 실제로 성능이 향상되었는지 확인할 수 있다. 

상당한 속도 향상을 제공하지 않는 한 복잡성을 유지하는 것은 의미가 없다.

## 20.3 주 경로 주변의 설계

성능을 향상시키는 가장 좋은 방법은 캐시 도입이나 다른 알고리즘 접근 방식을 사용하는 등 기본적인 변경을 사용하는 것이다.

핵심 아이디어는 중요한 경로를 중심으로 코드를 디자인 하는 것이다.

기존 코드 구조를 무시하라.

이 과정에서 일어나는 가장 중요한 일 중 하나는 중요한 경로에서 특별한 경우를 제거하는 것이다.

성능을 위해 재설계할 때 확인해야 하는 특별한 경우의 수를 최소화하도록 노력해라.

## 20.4 예: RAM Cloud 버퍼

## 20.5 결론

가장 중요한 전반적인 교육은 깔끔한 디자인과 고성능이 양립된다는 것이다.

복잡한 코드는 관련이 없거나 중복된 작업을 수행하기 때문에 속도가 느려지는 경향이 있다. 

성능을 최적화해야 하는 몇 가지 경우에서 핵심은 다시 단순성이다.

즉, 성능에 가장 중요한 경로를 찾아 최대한 단순하게 만드는 것이다.

# 21. 결론

복잡성을 다루는 것은 소프트웨어 설계에서 가장 중요한 과제이다. 

저자가 말하는 모든 제안의 단점은 프로젝트 초기 단계에 추가 작업이 발생한다는 것이다. 

좋은 디자인은 일단 방법을 알고 나면 빠르고 지저분한 디자인보다 실제로 훨씬 더 오래 걸리지 않는다.