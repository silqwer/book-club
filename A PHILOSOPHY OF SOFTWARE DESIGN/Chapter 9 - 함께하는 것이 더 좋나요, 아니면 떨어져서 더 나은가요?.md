# 9. 함께하는 것이 더 좋나요, 아니면 떨어져서 더 나은가요?

두 가지 기능이 주어졌을 때 동일한 장소에서 함께 구현해야 하는가, 아니면 구현을 분리해야하는가?

결합할지 분리할지 결정할 때 목표는 시스템 전체의 복잡성을 줄이고 모듈성을 향상시키는 것이다.

이 목표를 달성하는 가장 좋은 방법은 시스템을 다수의 작은 구성 요소로 나누는 것으로 보일 수 있다. 구성 요소가 작을수록 각 개발 구성 요소는 더 단순해질 가능성이 높다. 그러나 세분화 작업은 존재하지 않았던 추가적인 복잡성을 야기한다.

- 일부 복잡성은 구성 요소 수에서 비롯된다.
- 구성 요소가 많을수록 모든 구성 요소를 추적하기가 더 어렵고 대규모 컬렉션 내에서 원하는 구성 요소를 찾기가 더 어렵다.
- 세분화는 일반적으로 더 많은 인터페이스를 가져오고 모든 새로운 인터페이스는 복잡성을 추가한다.
- 세분화하면 구성 요소를 관리하기 위한 추가 코드가 생길 수 있다.
- 세분화된 구성요소는 세분화 전보다 더 멀리 떨어져 있게 된다.
- 구성 요소가 정말로 독립적이라면 분리가 좋다. 반면에 구성 요소 간에 종속성이 있으면 분리가 좋지 않다.
- 세분화는 중복을 초래할 수 있다.

## 9.1 정보가 공유되면 함께 모으세요

정보 공유로 인해 동일한 위치에서 요청을 읽고 구문 분석하는 것이 더 좋다. 하나로 결합되면 코드가 더 짧아지고 단순해진다.

## 9.2 인터페이스를 단순화한다면 함께 모으세요

두 개 이상의 모듈이 단일 모듈로 결합되면 원래 인터페이스보다 더 간단하거나 사용하기 쉬운 새 모듈에 대한 인터페이스를 정의하는 것이 가능할 수 있다.

## 9.3 중복을 제거하기 위해 함께 모으기

동일한 패턴의 코드가 계속해서 반복되는 경우 코드를 재구성하여 반복을 제거할 수 있는지 확인한다.

한 가지 접근 방식은 반복되는 코드를 별도의 메서드로 분리하고 반복되는 코드 조각을 메서드로 호출로 바꾸는 것이다. 

문제의 코드 조각이 한 곳에서만 실행되도록 코드를 리팩터링하는 것이다. 

## 9.4 일반용과 특수용의 분리 암호

모듈에 여러 가지 다른 목적으로 사용할 수 있는 메커니즘이 포함되어 있는 경우 해당 모듈은 하나의 범용 메커니즘만 제공해야 한다.

특수 목적 코드와 범용 코드를 분리하는 방법은 특수 목적 코드를 상위 계층으로 끌어오고 하위 계층은 범용으로 남겨 둔다.

![IMG_0228.jpeg](https://prod-files-secure.s3.us-west-2.amazonaws.com/6437a162-5a79-4682-899c-5f514456794e/0de70fd3-ac0a-4a69-a4ad-de4400dc97f0/IMG_0228.jpeg)

![IMG_0229.jpeg](https://prod-files-secure.s3.us-west-2.amazonaws.com/6437a162-5a79-4682-899c-5f514456794e/78a8db4a-332e-4b1e-919c-2f56f6c9d6af/IMG_0229.jpeg)

<aside>
💡 위험 신호: 반복
동일한 코드 조각이 계속해서 나타나는 경우 이는 올바른 추상화를 찾지 못했다는 위험신호이다.

</aside>

## 9.5 삽입 커서 및 선택

<aside>
💡 위험 신호: 특별-일변 혼합물
범용 메커니즘에 해당 메커니즘의 특정 용도로 특화된 코드도 포함되어 있을 때 발생한다.

</aside>

## 9.6 로링을 위한 별도 클래스

대부분은 한 줄의 코드로 구성되었지만 상당한 양의 문서가 필요했다. 오류가 감지된 위치에 로깅 문을 배치하는 것이 더 좋다. 이렇게 하면 코드를 더 쉽게 읽을 수있고 로깅 방법에 필요한 인터페이스가 제거된다.

## 9.7 편집기 실행 취소 메커니즘

핵심 디자인 결정은 실행 취소 메커니즘의 범용 부분을 특수 목적 부분에서 분리하고 범용 부분을 자체 클래스에 배치하는 것이었다.

## 9.8 분할 및 결합 방법

언제 세분화해야 하는지에 대한 문제는 클래스뿐만 아니라 메소드에도 적용된다. 메소드를 분할하면 추가 인터페이스가 발생하여 복잡성이 가중된다.

긴 메소드가 항상 나쁜 것은 아니다. 

![스크린샷 2024-08-18 오후 1.35.43.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/6437a162-5a79-4682-899c-5f514456794e/1697ca8e-1360-4ef7-a5e0-f266e1fc1966/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-08-18_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_1.35.43.png)

메서드를 설계할 때 가장 중요한 목표는 깨끗하고 간단한 추상화를 제공하는 것이다. 메소드를 분할하는 것은 전체적으로 더 깔끔한 추상화를 가져올 경우에만 의미가 있다. 

<aside>
💡 위험신호: 결합된 방법
각 방법을 독립적으로 이해할 수 있어야 한다.
한 메소드의 구현을 이해하지 못하고 다른 메소드의 구현도 이해할 수 없다면 이는 위험 신호이다. 두 개의 코드 조각이 물리적으로 분리되어 있지만 각 코드는 서로를 보아야만 이해할 수 있는 경우 이는 위험 신호이다.

</aside>

## 9.9 결론

모듈을 분할하거나 결합하는 결정은 복잡성에 따라 이루어져야 한다. 최상의 정보 숨김, 가장 적은 종속성 및 가장 깊은 인터페이스를 제공하는 구조를 선택하라.