# 1장 코드에 신경 쓰기

`TIP` 좋은 코드를 작성하려면 코드에 신경을 써야 한다. 훌륭한 프로그래머가 되려면 시간과 노력을 투자해야 한다.

## 코드가 중요하다.

평범한 프로그래머와 훌륭한 프로그래머의 차이는 바로 `태도`에 있다. 다양한 제약과 압박 속에서도, 폴다운 접근 방식을 취하고 최고의 코드를 작성하려는 태도로부터 훌륭한 프로그래밍은 태어난다.

실제 코드에 주의를 기울여야 한다. 즉 긍정적인 관점과 건전한 태도를 품어야 한다.

코드에 신경 쓴다는 것은 적절히 행동함을 뜻한다.

- 단지 작동하는 것처럼 보이는 코딩은 거부해야 한다.
- 의도가 드러나는 코드를 작성해야 하며 다른 프로그래머들도 쉽게 읽을 수 있는 코드를 작성해야 한다.
- 가장 좋은 소프트웨어를 만들어내는 것을 목표로, 자신의 능력만 강조하기보다는 팀원들과의 협업, 팀 성과에 주안점을 두어야 한다.
- 코드를 만지기 전보다 더 나아지도록 해야 한다.(여기에는 더 나은 구조, 더 나은 테스트, 더 쉬운 이해 등이 포함된다.)
- 프로그래밍에 대해 계속 주의를 기울이면서 지속적으로 새로운 언어나 문법, 기술을 익혀나가야 한다.
- 새로운 것들은 실제로 적용하는 것을 적절한 상황에 한정해야 한다.

`TIP` 코드에 대한 감정적 반응은 잘못된 것이 아니다. 훌륭한 결과물을 자랑스러워하거나 더러운 코드에 혐오감을 느끼는 것은 자신이 건전하다는 증거다. 

# 2장 정돈된 코드 유지하기

좋은 프로그래머는 코드의 좋은 레이아웃에 대해 깊이 고민한다. 그리고 이런 사소한 논쟁을 극복한다.

## 보이는 것은 강력하다

좋은 코드는 명백하며 일관성이 있다. 

`TIP` 보기 좋은 코드는 의도를 드러낸다. 그것은 예술이 아니다.

## 의사소통

### 두 명의 관객을 위해 코딩을 하라.

- 지금 코드를 작성하고 있는 나, 구현 실수를 하지 않으려면 코드는 아주 명확해야 한다.
- 몇 주 혹은 몇 달 후에 소프트웨어 출시를 준비할 당신 자신.
- 서로의 코드를 통합해야 하는 같은 팀에 있는 다른 동료
- 이전 버전에 있는 버그를 조사해야 할, 미래의 유지 보수 프로그래머

`TIP` 다른 사람을 위해 코딩하는 것을 잊지 말자.

## 레이아웃-절

코드를 훑어보는 것만으로도 전체 형태와 구조를 파악할 수 있어야 한다.

### 구조 잘 잡기-중

글을 쓰듯 코드를 작성하라. 코드를 장, 문단, 문장 단위로 자르라. 비슷한 것끼리 묶고 다른 것은 나누라. 함수는 장과 유사하다. 각 장은 별개이지만 서로 관련이 되는 코드가 있다. 

코드는 연관성과 관련된 순서는 중요하다. 코드를 읽을 사람을 고려하자. 가장 중요한 정보는 마지막이 아닌 맨 앞에 놓는다. 즉 `pulbic`은 `private`보다 먼저 적는다. 

짧은 코드를 작성하라.

## 일관성

하나만 골라서 일관성 있게 사용하라.

팀의 다른 동료들과 동일한 레이아웃 규칙으로 코드를 작성한다.

강압적으로 하지 않고 상호 합의하에 이루어져야 한다.

## 명명

잘못 명명된 변수는 혼동을 일으킬 수 있다. 좋은 이름은 서술적이고, 정확하며 관용적이어야 한다.

### 불필요한 반복을 피하라

불필요하게 반복되는 단어를 피하라.

### 명확하게 하라

간결함보다 명확함이 우선이다. 

### 관용어법을 지켜라

관용적 이름을 선호하자. 언어에서 주로 쓰이는 대문자화 규약을 따르자. 

### 정확하게 하라

명명을 정확하게 하라. 

## 스스로 가다듬기

코드를 정리 정돈 해야 하는 경우에는 기능 변경과 모양 변경을 동시에 진행하지 말라.

모양 변경과 기능 변경을 별도의 단계로 나누어 커밋하자.

`TIP` 기능 변경과 모양 변경을 동시에 하지 더 나말라. 별개의 단계로 나누라.

# 3장 코드 적게 쓰기

`TIP` 적은 양의 코드가 더 많은 소프트웨어를 의미할 수 있다.

불필요한 코드는 사악하다. 이런 코드는 사용하지 않는 컴포넌트, 죽어 있는 코드, 무의미한 주석, 장황한 설명 등과 같은 여러 형태를 띠고 있다.

시시한 말들은 잘라내고 명백하고 간결하게 표현하라.

`TIP` 코드를 명백하고 간결하게 쓰라. 불필요하게 구구절절 늘어놓는 행동은 피하라.

## 중복

불필요한 코드 중복은 사악하다. 이 같은 범죄 행위는 보통 잘라내기와 붙여넣기를 통해 발생한다. 게으른 프로그래머는 반복되는 코드를 공통 함수에 넣기를 고려하는 대신, 에디터를 통해 한 곳에서 다른 곳으로, 물리적으로 복사하여 옮긴다. 붙여넣기를 한 코드에 약간의 변경이 더해질 때 죄악은 가중된다.

코드를 복사한다는 것은 존재하는 버그는 모두 복사하되 반복 구조는 숨긴다는 뜻이다.

## 죽은 코드

유지 보수를 거치지 않는 코드는 서서히 부식하고 심지어 죽을 수도 있다. 죽은 코드란 실행되거나 호출되지 않는 생명력 없는 코드를 말한다. 생명을 불어넣어 주지 않으면 코드는 사라져 버린다.

- 한 번도 호출되지 않은 함수
- 선언되었지만 할당되지 않은 변수
- 내부 메서드에 전달되었지만 사용되지 않는 매개 변수
- 전혀 사용되지 않은 열거형, 구조체, 클래스, 인터페이스

## 주석

좋은 코드는 작동법을 설명하는 대량의 주석을 필요로 하지 않는다. 적절한 이름과 올바른 구조는 코드를 더 명확하게 만든다.

`TIP` 모든 주석이 코드에 가치를 더하지는 않는다는 것을 명심하자. 코드는 그 자체로 무엇을 하고 어떻게 작동하는지를 나타낸다. 주석은 그 이유를 설명하는 것으로, 코드만으로는 이유가 명확하게 드러나지 않을 때만 주석을 달아야 한다.

완벽히 코딩할 자신이 없는 개발자, 혹은 자신이 무엇을 하고 있는지 이해하지 못했거나 나중에 다시 코드를 이식해야 한다고 생각한 사람이 남긴 표식이기 때문이다. 코드를 완벽하게 제거하라.

`TIP` 주석 처리로 코드를 제거하지 말라. 그것은 코드를 읽는 사람을 혼란스럽게 만들고 방해한다.

코드가 어떤 역할을 하는지 설명하는 주석을 달지 말라. 코드의 구조가 코드 자체를 명확하게 보여주는 만큼, 코드 블록이나 스코프 끝에 주석을 달지 말라.

## 나쁜 설계

나쁜 설계는 분명한 이유 없이 수많은 여분의 데이터를 정렬하는 것과 같은, 컴포넌트 간의 불필요한 의사소통을 초래할 수 있다. 데이터가 많아질수록 더 많은 오류가 발생할 것이다. 

시간의 흐름과 더불어, 컴포넌트는 사용되지 않는 많은 코드를 남겨둔 채로 원래의 의도와 다르게 변화한다. 이런 현상이 발생했을 때 죽은 숲을 갈아엎는 것을 두려워하지 말라. 오래된 컴포넌트를 필요한 것만 가지고 있는 간결한 컴포넌트로 바꾸라.

## 그래서 무엇을 해야 할까

무의미한 코드를 의도적으로 작성하지 않는다. (간혹 좋은 코드에 시간을 투자하기보다 낮은 품질의 코드를 계속 사용하는 게으른 프로그래머가 없지는 않다). 이러한 문제는 오랜 시간 동안 많은 사람에 의해 유지 보수되고 확장되며, 공유되고 디버깅 된 코드 레거시로 해결될 수 있다. 

책임감을 느껴야 한다. 불필요한 코드를 쓰지 말고, 레거시 코드를 작업할 때는 경고 표시에 주의하라. 철저해져야 할 때가 되었다. 공백을 개선하고 어지러운 코드를 줄이며 균형을 유지하라.

돼지들이나 자신의 오물 안에서 산다. 프로그래머들은 그럴 필요가 없다. 코드를 작성한 후에는 스스로 정리하고 불필요한 코드는 즉시 제거하라.

`TIP` 매일 같이 코드를 더 좋게 만들라. 중복 코드는 발견 즉시 제거하라.

정돈은 다른 기능적 변화와는 별개로 전개되어야 한다. 그래야만 소스 관리 시스템에서 어떤 일이 일어났는지 명확히 이해할 수 있다. 기능적 수정과 불필요한 구조 변화가 섞여 있는 경우 불필요한 것들을 추적하기가 어렵다. 그리고 버그가 있는 경우 그것이 새로운 기능 때문인지 아니면 구조적 문제 때문인지 찾아내기 훨씬 더 어렵다.

# 4장 코드 줄여 개선하기

단순한 것이 더 아름답다는 말은 진부한 격언이지만, 때로는 진실이다.

`TIP` 새로운 코드를 추가하여 시스템을 개선할 수 있다. 반대로 코드를 제거하여 시스템을 개선할 수도 있다.

## 제멋대로인 코드

- 추가 코드가 재미있어서 그냥 작성하고 싶었다.
- 미래에 필요할 것 같은 기능을 지금 작성하기로 했다.
- 프로그래머가 문서에도 없는 추가 요구 사항을 제멋대로 만들었다.

## 불가피한 결과물

- 백엔드 지원 코드에 남아 있는 경우
- 더는 사용되지 않는 자료형 또는 클래스가 프로젝트에 남아 있는 경우
- 기존 제품의 기능들이 거의 제거되지 않는 경우
- 코드에 대한 오랜 기간의 유지 보수로 인해 함수 일부가 실행되지 않는 경우
- 잘 사용되지 않는 이벤트 핸들러가 있는 경우
- 전혀 사용되지 않는 함수 반환 값이 있는 경우
- 디버그 코드가 괴사하는 경우

## 어떻게 해야 하나

- 불필요한 코드 역시 다른 필요한 코드와 마찬가지로 유지 보수되어야 한다는 점은 명백하다. 여기에는 시간과 돈이 든다.
- 여분의 코드는 프로젝트를 파악하기 어렵게 만드는 만큼, 추가적인 이해와 검토가 필요하다.
- (실제 사용 여부와 상관없이) 백만 개의 매서드를 가진 클래스는 주의 깊게 프로그래밍할 수 없으며 엉성하게 작성할 수밖에 없다.
- 가장 빠른 장비, 가장 좋은 컴파일러를 사들여도 불필요한 코드는 빌드를 지체시키고 덜 생산적이게 만든다.
- 코드가 좀비 코드로 가득 차면 리팩터링이나 간소화, 최적화는 더 어려워진다.

`TIP` 가능하면 죽은 코드를 제거하라. 남겨둔다면 방해가 되고, 작업을 지체시킬 것이다.

## 죽은 코드 탐색

사용하지 않는 코드를 뿌리 뽑는 데 관심이 있다면, 문제 지점을 정확히 알려줄 다양한 종류의 개발 도구들이 있다. 

사용되지 않는 기능을 구별하기 위해, 제품을 계측하여 사용자들이 실제로 어떤 것을 사용하는지에 대한 지표를 수집할 수 있다. 불필요한 코드를 판별할 뿐만 아니라 모든 종류의 사업적 의사 결정을 내리는 데에도 유용하다. 

## 외과적 적출

죽은 코드를 제거하는 일은 해롭지 않다. 잘라내라. 그냥 버리라는 것이 아니다. 이전 기능이 다시 필요할 때는 버전 관리 시스템을 통해 손쉽게 가져올 수 있다. 

`TIP` 이래에 필요할지도 모르는 기능이라도 코드를 제거하는 것이 안전하다. 버전 관리 시스템에서 되돌릴 수 있다.

항상 다른 개발 작업과 `대청소` 기능을 분리하자. 이것은 버전 히스토리를 깨끗하게 만들고, 제거된 코드가 되살아났는지 확인시켜 준다.

`TIP` 코드 정리와 기능 변화는 별도의 커밋으로 이루어져야 한다.

죽은 코드를 발견했음에도 아무런 조치도 취하지 않는 것이야말로 실패의 징조이다. 사용되거나 실행되지 않는 불필요한 코드를 찾아냈다면 즉시 제거해 버리자.

# 5장 코드베이스의 망령

프로그래머로서 자질은 자신이 작성한 코드가 아닌, 그것을 대하는 태도와 작성하는 방식에 결정된다.

보통의 프로그래머는 오랜 시간 동안 자신의 코드를 관리하지 않는 경향이 있다. 자신의 똥통에 뒹굴지 않고 남의 똥통에 뒹거나 똥을 쌀 새로운 곳을 찾는다.

`TIP` 오래된 코드를 다시 살펴보는 것은 코딩 기술 등을 향상시키는 데 도움을 준다.

## 관례

보통 일반적인 실수나 버그를 방치하는 패턴을 공식화해준다.

기존의 코드를 돌아보는 것은 자신을 위한 코드 리뷰이자 가치 있는 행동이다.

더 이상 `적절`하지 않다고 느껴지는 예전의 코드를 찾아내는 것은 좋은 일이다. 이는 많이 배웠고 더 나아졌음을 의미한다.